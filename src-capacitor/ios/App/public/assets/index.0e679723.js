import{m as v,f as d,p as h,q as f,k as n,a6 as i,d as C,c5 as x,Q as B,x as r,u as l,r as u,cB as D,ad as P,j as I,cz as w,aa as S,F as $}from"./index.e198538d.js";import{_ as A}from"./DetailLayout.4e603666.js";import{_ as E}from"./HeaderWithBackBtn.9bfa7eee.js";import{a as Q}from"./ProductsActions.a1aeb929.js";import"./Events.fe5df1d9.js";import{a as N}from"./ProvidersActions.2ade4769.js";import{c as T}from"./confirmBeforeExit.a61a3851.js";import"./QImg.cf8c1307.js";import"./BackButton.5098c60e.js";/* empty css               *//* empty css                */var V="assets/product-default.b7d13827.svg";const q={class:"Product__title"},F={class:"Product__details"},L={class:"Product__price"},R={class:"Product__description"},j=v({__name:"Product.layout",props:{product:null,isProductInCart:{type:Boolean}},emits:["onAddToShoppingCart"],setup(o){return(e,t)=>{var s;return d(),h(r(A),{class:"Product",image_url:(s=o.product)==null?void 0:s.image_url,fallback:r(V)},{"custom-name":f(()=>[n("span",q,[n("span",null,i(o.product.name),1)])]),default:f(()=>{var a,c;return[n("div",F,[n("div",null,[n("span",L,"S/. "+i((a=o.product)==null?void 0:a.base_price_sol),1),n("p",R,i((c=o.product)==null?void 0:c.description),1)])]),C(B,{class:"Product__cart-button",color:o.isProductInCart?"negative":"accent",icon:o.isProductInCart?"remove_shopping_cart":"add_shopping_cart",onClick:t[0]||(t[0]=x(p=>e.$emit("onAddToShoppingCart",o.product),["stop"]))},null,8,["color","icon"])]}),_:1},8,["image_url","fallback"])}}}),z=()=>{const o=l(),e=u(),t=u(!1),s=o.params.id;return{product:e,isLoading:t,productId:s,getProductDetail:async()=>{t.value=!0,await Q(s).then(c=>{e.value=c,t.value=!1})}}},M=()=>{const o=l(),e=u(),t=o.params.provider;return{provider:e,providerId:t,getProviderDetail:async()=>{await N(t).then(a=>{e.value=a})}}};const rt=v({__name:"index",async setup(o){var m;let e,t;const s=l(),{product:a,getProductDetail:c}=z(),{shoppingCart:p,toggleProduct:k}=D(),{provider:y,getProviderDetail:b}=M();return T({currentRouteParent:(m=s.matched[0])==null?void 0:m.path,message:"Si sales de la p\xE1gina, se perder\xE1 lo que guardaste en el carrito de compras"}),[e,t]=P(()=>c()),await e,t(),[e,t]=P(()=>b()),await e,t(),(O,_)=>{var g;return d(),I($,null,[C(r(E),{"show-back-btn":"","img-back":(g=r(y))==null?void 0:g.logo_url},null,8,["img-back"]),r(a)?(d(),h(j,{key:0,onOnAddToShoppingCart:_[0]||(_[0]=G=>r(k)(r(a))),"is-product-in-cart":r(w)(r(a).id,r(p)),product:r(a)},null,8,["is-product-in-cart","product"])):S("",!0)],64)}}});export{rt as default};
